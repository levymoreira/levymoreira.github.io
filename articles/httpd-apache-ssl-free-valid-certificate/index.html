

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>HTTPD Apache SSL configuration with a FREE valid certificate - TL;DR</title>







<meta property="og:locale" content="en">
<meta property="og:site_name" content="TL;DR">
<meta property="og:title" content="HTTPD Apache SSL configuration with a FREE valid certificate">


  <link rel="canonical" href="https://levymoreira.com/articles/httpd-apache-ssl-free-valid-certificate/">
  <meta property="og:url" content="https://levymoreira.com/articles/httpd-apache-ssl-free-valid-certificate/">



  <meta property="og:description" content="Demo post displaying the various ways of highlighting code in Markdown.">



  <meta name="twitter:site" content="@levymoreira">
  <meta name="twitter:title" content="HTTPD Apache SSL configuration with a FREE valid certificate">
  <meta name="twitter:description" content="Demo post displaying the various ways of highlighting code in Markdown.">
  <meta name="twitter:url" content="https://levymoreira.com/articles/httpd-apache-ssl-free-valid-certificate/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2016-09-22T00:00:00-03:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Levy Moreira",
      "url" : "https://levymoreira.com",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://levymoreira.com/feed.xml" type="application/atom+xml" rel="alternate" title="TL;DR Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://levymoreira.com/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://levymoreira.com/">TL;DR</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://levymoreira.com/">All Posts</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://levymoreira.com/about">About</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="https://levymoreira.com/images/bio-photo.jpg" class="author__avatar" alt="Levy Moreira">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Levy Moreira</h3>
    <p class="author__bio">Geek, sofware developer and in my spare time game player.</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Fortaleza, Brazil</li>
      
      
      
        <li><a href="mailto:levymoreira.ce@gmail.com"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      
      
      
        <li><a href="https://twitter.com/levymoreira"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
      
      
        <li><a href="https://www.linkedin.com/in/levymoreira"><i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li>
      
      
      
      
      
      
        <li><a href="https://github.com/levymoreira"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="HTTPD Apache SSL configuration with a FREE valid certificate">
    <meta itemprop="description" content="HTTPD Apache SSL configuration with a FREE valid certificate">
    <meta itemprop="datePublished" content="September 22, 2016">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">HTTPD Apache SSL configuration with a FREE valid certificate
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>HTTPD Apache SSL configuration with a FREE valid certificate</p>

<p>This simple guide will show how to configure https in the Amazon EC2 instance with the operating system
Amazon Linux AMI or Cent OS.
At the end of this configuration any request to 
yoursite.com or www.yoursite.com will be redirected to https://www.yoursite.com
And the site will have a valid certificate, if your try use a self signed certificate you should receive one error like this: http://www.fixedbyvonnie.com/wp-content/uploads/2015/06/fixedbyvonnie-invalid-certificate.jpg
So we will generate a valid certificate with <a href="https://certbot.eff.org/">certbot</a>.</p>

<ul>
  <li>Install apache, php and ssl
yum install httpd mod_ssl git</li>
</ul>

<p>This command will install the <a href="https://httpd.apache.org/">HTTPD Apache</a>, that is a simple server, the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html">mod_ssl</a>, that is a module of Apache to cryptography using the Secure Sockets Layer (SSL) and Transport Layer Security (TLS) protocols and the <a href="https://git-scm.com/">git</a> that is one version control system that we will use just to download the project that will generate our certificate.</p>

<ul>
  <li>Disable welcome page of Apache
sudo rm -rf /etc/httpd/conf.d/welcome.conf</li>
</ul>

<p>By default Apache come with a welcome page, to disable this page we just need remove the conf file that do this.
Now just for test you can create one file called index.html in the /var/www/html/ and run
sudo service httpd start
then try access yourdomain.com, should work but without https.</p>

<ul>
  <li>Generating the certificate</li>
</ul>

<p>Now we can begin the game, generate the certificate…</p>

<h1 id="download-the-certbot-project">Download the certbot project</h1>
<p>git clone https://github.com/certbot/certbot.git
cd certbot</p>

<p>This command will download the last version of the certbot to your machine.</p>

<h1 id="run-the-command-that-generate-the-certificate">Run the command that generate the certificate</h1>
<p>./letsencrypt-auto certonly –debug</p>

<h1 id="select-the-first-option">Select the first option:</h1>
<p>Place files in webroot directory</p>

<h1 id="write-the-domain-address-ex">Write the domain address, ex.:</h1>
<p>luxysale.com www.luxysale.com</p>

<h1 id="select-the-root-apache-folder">Select the root apache folder</h1>
<p>/var/www/html/</p>

<h1 id="when-the-script-finish-the-certificates-will-be-generated-in-the-folder">When the script finish, the certificates will be generated in the folder:</h1>
<p>/etc/letsencrypt/live/luxysale.com/</p>

<h1 id="with-the-content">With the content:</h1>
<p>cert.pem   fullchain.pem chain.pem  privkey.pem</p>

<ul>
  <li>
    <p>Renew the certificate
# To renew the certificate just go to the folder certbot and execute:
./letsencrypt-auto renew</p>
  </li>
  <li>
    <p>Setting the new certificate in apache
# Edit the file /etc/httpd/conf.d/ssl.conf, and edit/include the follow properties:
ServerName luxysale.com
ServerAlias www.luxysale.com
SSLCertificateFile /etc/letsencrypt/live/luxysale.com/cert.pem
SSLCertificateKeyFile /etc/letsencrypt/live/luxysale.com/privkey.pem
SSLCertificateChainFile /etc/letsencrypt/live/luxysale.com/fullchain.pem</p>
  </li>
  <li>
    <p>Enabling redirect from http to https
# Edit the file /etc/httpd/conf/httpd.conf, and include the follow lines at the end of file:</p>
  </li>
</ul>
<p>&lt;VirtualHost *:80&gt;
  ServerName www.luxysale.com
  Redirect “/” “https://www.luxysale.com/”
&lt;/VirtualHost&gt;</p>

<ul>
  <li>Troubleshooting</li>
</ul>

<h1 id="try-install-sslmod-and-httpd-at-the-same-time-when-i-tried-to-install-sslmod-with-an-already-installed-version-of-httpd-occurred-compatibility-errors-and-ended-up-having-to-remove-it-and-install-again">Try install ssl_mod and httpd at the same time, when I tried to install ssl_mod with an already installed version of httpd occurred compatibility errors and ended up having to remove it and install again.</h1>
<p>To remove everything and start again run the commands:</p>

<p>yum remove php* 
yum remove httpd*</p>


        
      </section>

      <footer class="page__meta">
        
        


  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://levymoreira.com/tags/#certificate" class="page__taxonomy-item" rel="tag">certificate</a><span class="sep">, </span>
    
      
      
      <a href="https://levymoreira.com/tags/#httpd" class="page__taxonomy-item" rel="tag">httpd</a><span class="sep">, </span>
    
      
      
      <a href="https://levymoreira.com/tags/#https" class="page__taxonomy-item" rel="tag">https</a><span class="sep">, </span>
    
      
      
      <a href="https://levymoreira.com/tags/#ssl" class="page__taxonomy-item" rel="tag">ssl</a>
    
    </span>
  </p>




  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://levymoreira.com/categories/#articles" class="page__taxonomy-item" rel="tag">articles</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-09-22T00:00:00-03:00">September 22, 2016</time></p>
        
      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=levymoreira&text=HTTPD Apache SSL configuration with a FREE valid certificate https://levymoreira.com/articles/httpd-apache-ssl-free-valid-certificate/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://levymoreira.com/articles/httpd-apache-ssl-free-valid-certificate/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://levymoreira.com/articles/httpd-apache-ssl-free-valid-certificate/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://levymoreira.com/articles/httpd-apache-ssl-free-valid-certificate/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      


  <nav class="pagination">
    
      <a href="https://levymoreira.com/articles/code-highlighting-post/" class="pagination--pager" title="Syntax Highlighting Post
">Previous</a>
    
    
      <a href="https://levymoreira.com/articles/java-development-with-docker/" class="pagination--pager" title="Java Development with Docker
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/levymoreira"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/levymoreira"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://levymoreira.com/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2016 Levy Moreira. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://levymoreira.com/assets/js/main.min.js"></script>





  </body>
</html>
